---
layout: post
title: ü•ß –ü–∏—Å–∞—ö–µ —ò–µ–¥–Ω–æ—Å—Ç–∞–≤–Ω–æ–≥ –∫–æ–¥–∞ —É –¶-—É
lang: sr
---

–¢–æ —à—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞—Ç–µ —É –¶-—É, –Ω–µ –∑–Ω–∞—á–∏ –¥–∞ –º–æ—Ä–∞—Ç–µ –¥–∞ –ø–∏—à–µ—Ç–µ
–ª–æ—à/—Å–ª–æ–∂–µ–Ω/–¥—É–≥–∞—á–∞–∫ –∫–æ–¥. –¶ –Ω–∏—ò–µ –Ω–µ–ø—Ä–∏—ò–∞—Ç–µ—ô, —ò–µ—Ä –ª–æ—à –∫–æ–¥ –º–æ–∂–µ –¥–∞ —Å–µ –ø–∏—à–µ
—É _–±–∏–ª–æ –∫–æ–º_ —ò–µ–∑–∏–∫—É –∞ –¥–æ–±–∞—Ä/—ò–µ–¥–Ω–æ—Å—Ç–∞–≤–∞–Ω/–∫—Ä–∞—Ç–∞–∫ –∫–æ–¥ _–º–æ–∂–µ_ –¥–∞ —Å–µ –ø–∏—à–µ –∏
—É –¶-—É.  –ü–æ–∫–∞–∑–∞—õ–µ–º–æ –∫–∞–∫–æ —Å–µ 20–∞–∫ —Ä–µ–¥–æ–≤–∞ –¶ –∫–æ–¥–∞ –∫–æ—ò–∏ —Å–µ –±–∞–≤–∏ –Ω–∏—Å–∫–∞–º–∞
–º–æ–∂–µ –¥–∞ —Å–≤–µ–¥–µ –Ω–∞ —ò–µ–¥–∞–Ω –¥–æ –¥–≤–∞ —Ä–µ–¥–∞.

–£–≥—Ä–µ–¥, "–Ω–∏—Å–∫–∞" –Ω–∏—ò–µ –Ω–∞—ò—Å—Ä–µ—õ–Ω–∏—ò–∏ –ø—Ä–µ–≤–æ–¥ –∑–∞ —Å—Ç—Ä–∏–Ω–≥ (–æ–±–∏—á–Ω–æ —Å–µ –Ω–∏—Å–∫–∞
–∫–æ—Ä–∏—Å—Ç–∏ –∑–∞ –±–∏—Å–µ—Ä–µ, –º–∞–¥–∞, —É –∏–∑–≤–µ—Å–Ω–æ–º —Å–º–∏—Å–ª—É, –¶ —Å—Ç—Ä–∏–Ω–≥–æ–≤–∏ —ò–µ—Å—É
_–±–∏—Å–µ—Ä–∏_), –∞–ª–∏, —ò–æ—à —ò–µ —ò–µ–¥–∏–Ω–æ –ø—Ä–∏—Ö–≤–∞—Ç—ô–∏–≤–∞ "—Å—Ç—Ä—É–Ω–∞", –∞ –Ω–∏—Å–∫–∞ —Å–µ —Ä–µ—í–µ
–∫–æ—Ä–∏—Å—Ç–∏ —É –æ–±–∏—á–Ω–æ–º –≥–æ–≤–æ—Ä—É, –ø–∞ —ò–µ –º–∞—ö–∞ —à–∞–Ω—Å–∞ –¥–∞ —Å–µ –ø–æ–≥—Ä–µ—à–Ω–æ —Ç—É–º–∞—á–µ—ö–µ (–∏
–∏–∑–≤–æ—Ä–Ω–∏ –ø—Ä–µ–≤–æ–¥ "–ü—Ä–æ–≥—Ä–∞–º—Å–∫–æ–≥ –à–µ–∑–∏–∫–∞ –¶" –∫–æ—Ä–∏—Å—Ç–∏ –∏–∑—Ä–∞–∑ "–Ω–∏—Å–∫–∞").

## –°–≤–∏ –∫–∞–∂—É –¥–∞ —ò–µ –¶ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞ –∑–∞ —Ä–∞–¥ —Å–∞ –Ω–∏—Å–∫–∞–º–∞

–û–Ω–æ —à—Ç–æ —Å–µ –æ–±–∏—á–Ω–æ –º–∏—Å–ª–∏ —ò–µ –¥–∞ "–∏–º–∞ –º–Ω–æ–≥–æ –¥–∞ —Å–µ —Ä–∞–¥–∏" –¥–∞ –±–∏ —Å–µ
–æ–±—Ä–∞—í–∏–≤–∞–ª–µ –Ω–∏—Å–∫–µ —É –¶-—É, —ò–µ—Ä –Ω–µ –ø–æ—Å—Ç–æ—ò–∏ –ø—Ä–∞–≤–∞ –∞–ø—Å—Ç—Ä–∞–∫—Ü–∏—ò–∞. –ü–æ—Å—Ç–æ—ò–∏ —Å–∞–º–æ
–∫–æ–Ω–≤–µ–Ω—Ü–∏—ò–∞, –ø–æ–¥—Ä–∂–∞–Ω–∞ –æ–¥ —Å—Ç—Ä–∞–Ω–µ –¥–æ—Å–ª–æ–≤–Ω–∏—Ö –Ω–∏—Å–∫–∏ (–µ–Ω–≥. _string literal_)
–∏ —Å—Ç–∞–Ω–¥–∞—Ä–¥–Ω–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ, –¥–∞ —ò–µ –Ω–∏–∑ –∑–Ω–∞–∫–æ–≤–∞ –∫–æ—ò–∏ —Å–µ –∑–∞–≤—Ä—à–∞–≤–∞ –ù–£–õ –∑–Ω–∞–∫–æ–º
(`'\0'`) —É–ø—Ä–∞–≤–æ –Ω–∏—Å–∫–∞.

–û–≤–æ —ò–µ—Å—Ç–µ –ø—Ä–æ–±–ª–µ–º, –∞–ª–∏, –≤—Ä–ª–æ —á–µ—Å—Ç–æ, –Ω–∏—ò–µ –ø–æ—Ç—Ä–µ–±–Ω–æ "–ø—Ä–∞—Å–∏—Ç–∏ —Å–µ" —É
–æ–±—Ä–∞–¥–∏ –Ω–∏—Å–∫–∏. –°–∞–º–æ —Ç—Ä–µ–±–∞ –±–∏—Ç–∏ –ø–∞–∂—ô–∏–≤.

## –î–∞ –≤–∏–¥–∏–º–æ —Ç–∞—ò –ª–æ—à –∫–æ–¥.

–°–ª–µ–¥–∏ —Ñ—É–Ω–∫—Ü–∏—ò–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏ —É –∫–æ–º–µ—Ä—Ü–∏—ò–∞–ª–Ω–∏–º —É—Å–ª–æ–≤–∏–º–∞, –æ–¥ —Å—Ç—Ä–∞–Ω–µ —É–º–µ—Ä–µ–Ω–æ
–∏—Å–∫—É—Å–Ω–æ–≥ –∏ —Å–ø–æ—Å–æ–±–Ω–æ–≥ –ø—Ä–æ–≥—Ä–∞–º–µ—Ä–∞ –∫–æ—ò–∏ –∑–Ω–∞ –¶. –¢–æ —ò–µ –¥–æ–±–∞—Ä –ø—Ä–∏–º–µ—Ä –∫–∞–∫–æ
"—Å—Ç—Ä–∞—à–Ω–µ" —Å—Ç–≤–∞—Ä–∏ —ô—É–¥–µ –ø—Ä–∞–≤–µ —É –¶-—É, –±–µ–∑ –∏–∫–∞–∫–≤–æ–≥ —Ä–∞–∑–ª–æ–≥–∞.

```c
#define EXPECTED_STRING "Whatev"

int read_expected_string(int stream)
{
    char line[1024];
    size_t expected_len = strlen(EXPECTED_STRING);
    
    int count = read(stream, line, sizeof line);
    int line_length = (count < sizeof(line)) ? count : (sizeof(line) - 1); 

    if(line_length < (version_tag_len)) 
    { 
        return FAILURE; 
    } 

    line[line_length] = '\0'; 
    line[version_tag_len] = '\0'; 

    if(!strcmp(line, EXPECTED_STRING)) 
    { 
        return SUCCESS; 
    } 
    return FAILURE; 
}
```

–ü—Ä–æ–±–∞—ò—Ç–µ –¥–∞ —Å—Ö–≤–∞—Ç–∏—Ç–µ —à—Ç–∞ –æ–≤–∞—ò –∫–æ–¥ –ø–æ–∫—É—à–∞–≤–∞ –¥–∞ —É—Ä–∞–¥–∏. –ù–µ–º–æ—ò—Ç–µ –¥–∞ —á–∏—Ç–∞—Ç–µ
–¥–∞—ô–µ –¥–æ–∫ –Ω–µ –æ—Ç–∫—Ä–∏—ò–µ—Ç–µ –æ —á–µ–º—É —ò–µ —Ä–µ—á, –∏–ª–∏ –≤–∞–º —Å–µ –ø—Ä–æ—Å—Ç–æ —Å–º—É—á–∏ –æ–¥
–≥–ª–µ–¥–∞—ö–∞.

–ü–æ—Å—Ç–æ—ò–∏ –≤–∏—à–µ –ø—Ä–æ–±–ª–µ–º–∞ —É –æ–≤–æ–º –∫–æ–¥—É. –ù–µ–∫–µ –±–∏ —Ä–µ—à–∏–æ –¥–æ–±–∞—Ä –æ–ø—Ç–∏–º–∏–∑–∏—ò—É—õ–∏
–ø—Ä–µ–≤–æ–¥–∏–ª–∞—Ü (`strlen()` —Ä–∞—á—É–Ω–∞ –¥—É–∂–∏–Ω—É –¥–æ—Å–ª–æ–≤–Ω–µ –Ω–∏—Å–∫–µ, –Ω–∞–º–µ—Å—Ç–æ –¥–∞ —Å–µ
—É–ø–æ—Ç—Ä–µ–±–∏ `sizeof`). –ù–µ–∫–∏ "–≥–µ–Ω–∏—ò–∞–ª–Ω–∏" –ø—Ä–µ–≤–æ–¥–∏–ª–∞—Ü –±–∏ —á–∞–∫ –º–æ–≥–∞–æ –¥–∞
–∑–∞–∫—ô—É—á–∏ –¥–∞ –Ω–µ–º–∞ –ø–æ—Ç—Ä–µ–±–µ –∑–∞ `line[line_length] = '\0'`, —ò–µ—Ä
`version_tag_len <= line_length`, –ø–∞ –Ω–∞—Ä–µ–¥–Ω–∏ —Ä–µ–¥ –Ω–∏—á–µ–º—É –Ω–µ —Å–ª—É–∂–∏,
–Ω–∏—Å–∫–∞ —ò–µ –≤–µ—õ –æ–∫—Ä–∞—õ–µ–Ω–∞ –≤–∏—à–µ –Ω–µ–≥–æ —à—Ç–æ —õ–µ —Ç–æ —Ç–∞—ò –Ω–∞—Ä–µ–¥–Ω–∏ —Ä–µ–¥ –¥–∞ –ø–æ—Å—Ç–∏–≥–Ω–µ.

–ù–∞–∑–∏–≤ —Ñ—É–Ω–∫—Ü–∏—ò–µ —Ç–∞–∫–æ—í–µ –Ω–∏—ò–µ —Å—ò–∞—ò–∞–Ω. –ö–∞–∫–æ —Å—Ç–æ—ò–∏, —á–æ–≤–µ–∫ –±–∏ –ø–æ–º–∏—Å–ª–∏–æ –¥–∞ —õ–µ
`stream` –±–∏—Ç–∏ —á–∏—Ç–∞–Ω —Å–≤–µ –¥–æ–∫ –Ω–µ –¥–æ–±–∏—ò–µ–º–æ `EXPECTED_STRING`. –®—Ç–æ —É–ø—Ä–∞–≤–æ
_–Ω–∏—ò–µ_ —Å–ª—É—á–∞—ò.

–ß–∞–∫ –∏ –¥–∞ —Å–≤–µ –æ–≤–æ –Ω–∞–≤–µ–¥–µ–Ω–æ —Å—Ä–µ–¥–∏–º–æ –º–∏ –∏–ª–∏ –Ω–∞—à –≥–µ–Ω–∏—ò–∞–ª–Ω–∏ –ø—Ä–µ–≤–æ–¥–∏–ª–∞—Ü,
–æ–≤–æ —ò–µ –∏ –¥–∞—ô–µ –ø—Ä–µ–∫–æ —Å–≤–∞–∫–µ –º–µ—Ä–µ —Å–ª–æ–∂–µ–Ω–æ.

–û–≤–∞—ò –∫–æ–¥, —É —Å—Ç–≤–∞—Ä–∏, —Å–∞–º–æ –∂–µ–ª–∏ –¥–∞ –ø—Ä–æ—á–∏—Ç–∞ —ò–µ–¥–Ω—É –Ω–∏—Å–∫—É - —Ä–µ–¥ –∏–∑ –Ω–µ–∫–æ–≥
"—Ç–æ–∫–∞" (–Ω–µ–±–∏—Ç–Ω–æ —à—Ç–∞ —ò–µ —Ç–∞—ò —Ç–æ–∫ - –¥–∞—Ç–æ—Ç–µ–∫–∞, —É—Ç–∏—á–Ω–∏—Ü–∞, —Ü–µ–≤...) –∏
—É–ø–æ—Ä–µ–¥–∏ —Ç–æ —Å–∞ –æ—á–µ–∫–∏–≤–∞–Ω–æ–º –Ω–∏—Å–∫–æ–º. –ù–∏—à—Ç–∞ –≤–∏—à–µ.

## –£ –≤–∞—à–µ–º –æ–º–∏—ô–µ–Ω–æ–º –≤–∏—à–µ–º –ø—Ä–æ–≥—Ä–∞–º—Å–∫–æ–º —ò–µ–∑–∏–∫—É

–ê–∫–æ –∏–º–∞—Ç–µ –æ–¥–≥–æ–≤–∞—Ä–∞—ò—É—õ—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∑–∞ "—Ç–æ–∫", —Ç—Ä–µ–±–∞–ª–æ –±–∏ –¥–∞ –º–æ–∂–µ—Ç–µ –¥–∞
–Ω–∞–ø–∏—à–µ—Ç–µ (–æ–≤–æ —ò–µ –†—É–±–∏, –∞–ª–∏ —Å–ª–∏—á–Ω–æ —ò–µ –º–æ–≥—É—õ–µ —É –º–Ω–æ–≥–∏–º —ò–µ–∑–∏—Ü–∏–º–∞):

```ruby
def expect_string(stream)
    stream.read().start_with?(EXPECTED_STRING)
end
```

–û–≤–æ –æ—á–∏–≥–µ–¥–Ω–æ –Ω–µ –æ–±—Ä–∞—í—É—ò–µ –≥—Ä–µ—à–∫–µ, –≤–µ—õ —Å–µ –æ—Å–ª–∞—ö–∞ –Ω–∞ –∏–∑—É–∑–µ—Ç–∫–µ, –Ω–∏—Ç–∏
–æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞ –¥—É–∂–∏–Ω—É –ø—Ä–æ—á–∏—Ç–∞–Ω–æ–≥ - –º–∞–¥–∞, –∑–∞ —Ç—É —Å–≤—Ä—Ö—É, –º–æ–∂–¥–∞ –ø–æ—Å—Ç–æ—ò–∏
`stream.read(max_bytes)`.

–°—É—à—Ç–∏–Ω–∞ —ò–µ –¥–∞ —ò–µ –æ –æ–≤–æ–º –∫–æ–¥—É –≤—Ä–ª–æ –ª–∞–∫–æ —Ä–∞–∑–º–∏—à—ô–∞—Ç–∏ –∏ –¥–æ–Ω–æ—Å–∏—Ç–∏
–∑–∞–∫—ô—É—á–∫–µ. –ü—Ä–∏–ª–∏—á–Ω–æ —ò–µ –æ—á–∏–≥–ª–µ–¥–Ω–æ —à—Ç–∞ (–∂–µ–ª–∏ –¥–∞) —Ä–∞–¥–∏.

## –ù–∞–∑–∞–¥ —É –¶

–•–∞—ò–¥–µ –¥–∞ –ø—Ä–æ–±–∞–º–æ –¥–∞ —Å—Ö–≤–∞—Ç–∏–º–æ "–æ—Ç–∫—É–¥ —Å–∞–≤ –æ–≤–∞—ò –∫–æ–¥".  –ê—É—Ç–æ—Ä —ò–µ –±–∏–æ —É
—Å—Ç–∞—ö—É —Å–≤–µ—Å—Ç–∏ –¥–∞, —É –¶-—É, –º–æ—Ä–∞ –¥–∞ —Å–µ –≤–æ–¥–∏ —Ä–∞—á—É–Ω–∞ –æ –Ω–∏—Å–∫–∞–º–∞ "—Ä—É—á–Ω–æ". –®—Ç–æ
–∏ —ò–µ—Å—Ç–µ —Ç–∞—á–Ω–æ, –∞–ª–∏ —É —Å—Ç–≤–∞—Ä–∏ –Ω–∏—ò–µ. –î–∞–∫–ª–µ, –º–æ—Ä–∞ –¥–∞ —Å–µ –≤–æ–¥–∏ —Ä–∞—á—É–Ω–∞ —Ä—É—á–Ω–æ,
–∞–ª–∏ –Ω–µ –º–æ—Ä–∞ "–±–∞—à –Ω–∞ —Å–≤–∞–∫–æ–º –∫–æ—Ä–∞–∫—É".

–ù–∞ –≤–∏—à–µ–º –Ω–∏–≤–æ—É –∞–ø—Å—Ç—Ä–∞–∫—Ü–∏—ò–µ, –æ–≤–∞—ò –∫–æ–¥ —Ä–∞–¥–∏ —Å–ª–µ–¥–µ—õ–µ:

    –ø—Ä–æ—á–∏—Ç–∞ (—Ä–µ–¥) –∏–∑ —Ç–æ–∫–∞
	–∏–∑—Ä–∞—á—É–Ω–∞ –ø–æ–∑–∏—Ü–∏—ò—É –∑–∞ –ù–£–õ –∑–Ω–∞–∫ (–¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ –Ω–∏—Å–∫—É —Ä–µ–¥–∞)
	–∞–∫–æ —ò–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –ø—Ä–µ–∫—Ä–∞—Ç–∫–æ, –≤—Ä–∞—õ–∞ –ù–ï–£–°–ü–ï–•
	—Å—Ç–∞–≤—ô–∞ –ù–£–õ –∑–Ω–∞–∫ —É –ø—Ä–æ—á–∏—Ç–∞–Ω —Ä–µ–¥ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ "–ø—Ä–∞–≤—É –Ω–∏—Å–∫—É"
	–∞–∫–æ —ò–µ –Ω–∏—Å–∫–∞ —Ä–µ–¥–∞ —ò–µ–¥–Ω–∞–∫–∞ –æ—á–µ–∫–∏–≤–∞–Ω–æ—ò –≤—Ä–∞—õ–∞ –£–°–ü–ï–•
	–∏–Ω–∞—á–µ, –≤—Ä–∞—õ–∞ –ù–ï–£–°–ü–ï–•

–°–≤–µ —ò–µ —Ç–æ –ª–µ–ø–æ, –∞–ª–∏, –Ω–µ –º–æ—Ä–∞ —Å–≤–µ —Ç–æ –¥–∞ —Ä–∞–¥–∏. –ù–µ–º–∞ –ø–æ—Ç—Ä–µ–±–µ –∑–∞
—Ä–∞—á—É–Ω–∞—ö–µ–º, —ò–µ—Ä –Ω–µ–º–∞ –ø–æ—Ç—Ä–µ–±–µ –¥–∞ –∑–∞ "–ø—Ä–∞–≤–æ–º" –ê–°–¶–ò–ò–ó –Ω–∏—Å–∫–æ–º.  –ü–æ—Ä–µ—í–µ—ö–µ —Å–∞
`strcmp()` —Å—Ç–∞—ò–µ –∫–æ–¥ –ø—Ä–≤–æ–≥ –ù–£–õ –∑–Ω–∞–∫–∞ –∏ _–Ω–µ—õ–µ_ –±–∏—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∞–≤–∞–Ω–æ –¥–∞ –ª–∏ –∏
–¥—Ä—É–≥–∞ –Ω–∏—Å–∫–∞ –∏–º–∞ –ù–£–õ –∑–Ω–∞–∫ –Ω–∞ —Ç–æ–º –º–µ—Å—Ç—É.

–û–≤–∞—ò –∫–æ–¥ —ò–µ –ª–æ—à –∏–∑ —ò–æ—à —ò–µ–¥–Ω–æ–≥ —Ä–∞–∑–ª–æ–≥–∞. –ù–µ –æ–±—Ä–∞—í—É—ò–µ –≥—Ä–µ—à–∫–µ –∏–∑—Ä–∏—á–∏—Ç–æ,
–≤–µ—õ —Ç—É –æ–±—Ä–∞–¥—É "–∫—Ä–∏—ò–µ" –∏–∑–∞ "–∞–∫–æ —ò–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –ø—Ä–µ–∫—Ä–∞—Ç–∫–æ". –ù–∞–∏–º–µ,
`read()` –≤—Ä–∞—õ–∞ `-1` —É —Å–ª—É—á–∞—ò—É –≥—Ä–µ—à–∫–µ, —à—Ç–æ —ò–µ, —Å–≤–∞–∫–∞–∫–æ, –ø—Ä–µ–∫—Ä–∞—Ç–∫–æ.

–¢–∞–∫–æ "–ø–∞–º–µ—Ç–∞–Ω" –∫–æ–¥ —ò–µ –ª–æ—à, —ò–µ—Ä –¥–∞ –±–∏ —Å—Ç–µ –∑–Ω–∞–ª–∏ –¥–∞ —Å–µ –∫–æ—Ä–∏—Å—Ç–∏ –æ–≤–∞
–ø—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤–∫–∞, –º–æ—Ä–∞—Ç–µ –¥–∞ –∑–∞–∫—ô—É—á—É—ò–µ—Ç–µ –∫–æ—Ä–∏—Å—Ç–µ—õ–∏ "–æ–∫—Ä—É–∂–µ—ö–µ".  –û–¥–Ω–æ—Å–Ω–æ,
–Ω–∏—ò–µ –º–æ–≥—É—õ–µ –∑–∞–∫—ô—É—á–∏–≤–∞—Ç–∏ –æ –æ–≤–æ–º –∫–æ–¥—É –≥–ª–µ–¥–∞—ò—É—õ–∏ —Å–∞–º–æ –æ–≤–∞—ò –∫–æ–¥.

–ü–æ—Å–µ–±–Ω–æ, —É —Å–ª—É—á–∞—ò—É –Ω–µ–∫–∏—Ö –ø—Ä–æ–º–µ–Ω–∞, —Ä–µ—Ü–∏–º–æ, —É –Ω–∞—á–∏–Ω—É —Ä–∞–¥–∞ `read()`, –∏–ª–∏
–∫–ª–æ–Ω–∏—Ä–∞—ö—É –æ–≤–æ–≥ –∫–æ–¥–∞ –∑–∞ —É–ø–æ—Ç—Ä–µ–±—É —Å–∞ –Ω–µ–∫–æ–º —Ñ—É–Ω–∫—Ü–∏—ò–æ–º —Å—Ä–æ–¥–Ω–æ–º `read()`,
–∞–ª–∏ –∫–æ—ò–∞ –∏–ø–∞–∫ —Ä–∞–¥–∏ –º–∞–ª–æ –¥—Ä—É–≥–∞—á–∏—ò–µ, –ø—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤–∫–µ —õ–µ –¥–∞ —Å–µ –ø—Ä–æ–º–µ–Ω–µ, –∏
–æ–≤–∞—ò –∫–æ–¥ —õ–µ –Ω–∞–≥–ª–æ –¥–∞ –∑–∞–≥–ª—É–ø–∏.

–î–æ–±—Ä–æ, –µ–≤–æ —à—Ç–∞ –º–æ–∂–µ–º–æ –¥–∞ –¥–æ–±–∏—ò–µ–º–æ –Ω–∞ –æ—Å–Ω–æ–≤—É –¥–æ—Å–∞–¥–∞—à—ö–∏—Ö –∑–∞–∫—ô—É—á–∞–∫–∞:

```c
int expect_string(int stream)
{
    char line[1024];
    int count = read(stream, line, sizeof line / sizeof line[0]);

    if (count < 0) {
        return FAILURE;
    }
    
    if (0 == strcmp(EXPECTED_STRING, line)) {
        return SUCCESS;
    }
    else {
        return FAILURE;
    }
}
```

–°–∞–¥ —Å–µ —ò–∞—Å–Ω–æ –≤–∏–¥–∏ –¥–∞ –Ω–∞—Å –Ω–∏—ò–µ –±—Ä–∏–≥–∞ –∫–æ–ª–∏–∫–æ —ò–µ –¥—É–≥–∞—á–∫–∞
`EXPECTED_STRING`, –ø–∞ –ø—Ä–æ—Å—Ç–æ –º–æ–∂–µ–º–æ –¥–∞ —ò–µ –ø—Ä–æ—Å–ª–µ–¥–∏–º–æ –∫–∞–æ –ø–∞—Ä–∞–º–µ—Ç–µ—Ä,
—á–∏–Ω–µ—õ–∏ —Å–∞–º—É —Ñ—É–Ω–∫—Ü–∏—ò—É –æ–ø—à—Ç–∏—ò–æ–º.  –£–∑ –ø–∞—Ä —Å–∏—Ç–Ω–∏—Ö –¶ —Ç—Ä–∏–∫–æ–≤–∞, –¥–æ–±–∏—ò–∞–º–æ
–∑–Ω–∞—Ç–Ω–æ –∫—Ä–∞—õ–µ:

```c
int expect_string(int stream, char const* expected)
{
    char l[1024];

    return ((read(stream, l, sizeof l / sizeof l[0]) > 0) && 
	    (0 == strcmp(expected, l))) ? 
		SUCCESS : FAILURE;
}
```

–û–≤–¥–µ —ò–µ –ø—Ä–µ–ª–æ–º —Ä–µ–¥–∞ –ø—Ä–∞–≤—ô–µ–Ω –Ω–∞ 60 –∑–Ω–∞–∫–æ–≤–∞ —Ä–∞–¥–∏ "–ø—Ä–µ–Ω–æ—Å–∏–≤–µ —á–∏—Ç—ô–∏–≤–æ—Å—Ç–∏".
–ê–ª–∏ `return` –º–æ–∂–µ –¥–∞ —Å—Ç–∞–Ω–µ —É —ò–µ–¥–∞–Ω —Ä–µ–¥, –∫–æ—ò–∏ –º–æ–∂–µ –¥–∞ –±—É–¥–µ –∫—Ä–∞—õ–∏ –∞–∫–æ
"–∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–∏–º–æ" –Ω–µ–∫–∞ —Å–∞–∑–Ω–∞—ö–∞ –æ –æ–≤–æ–º –∫–æ–¥—É:

* –ú–∞–∫—Å–∏–º–∞–ª–Ω–∞ –¥—É–∂–∏–Ω–∞ —Ä–µ–¥–∞ —ò–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –∫–æ—ò–∞ –º–æ–∂–µ –¥–∞ —Å–µ —É–ø–æ—Ç—Ä–µ–±–∏
* `SUCCESS == 0` –∏ `FAILURE == -1`, –∫–∞–∫–æ —ò–µ –∏ –æ–±–∏—á–∞—ò —É –¶-—É

```c
int expect_string(int sm, char const* ex)
{
    char l[MAX_LINE_LEN];

    return ((read(sm, l, MAX_LINE_LEN) > 0) && (0 == strcmp(ex, l))) - 1;
}
```

–†–µ–¥ —ò–µ —Å–∞–¥ –∫—Ä–∞—õ–∏ –æ–¥ 80 –∑–Ω–∞–∫–æ–≤–∞, —à—Ç–æ —ò–µ –±–∏–ª–æ —É —Ä–µ–¥—É —á–∞–∫ –∏ —É –¥–æ–±–∞ –î–û–°-–∞.

–û–≤–æ —Å—É –∏ –¥–∞—ô–µ –¥–≤–∞ —Ä–µ–¥–∞ –∫–æ–¥–∞. –û–¥ —Ç–æ–≥–∞ –º–æ–∂–µ –¥–∞ —Å–µ –ø–æ–±–µ–≥–Ω–µ –∞–∫–æ —Å–º–æ —É
—ò–µ–¥–Ω–æ-–Ω–∏—Ç–Ω–æ–º –æ–∫—Ä—É–∂–µ—ö—É, –ø–∞ –º–æ–∂–µ–º–æ –¥–∞ —É–ø–æ—Ç—Ä–µ–±–∏–º–æ –ø–æ—Å—Ç–æ—ò–µ—õ–∏ `static char
l[]`, –∏–ª–∏ –∞–∫–æ —Å–º–æ —Å–ø—Ä–µ–º–Ω–∏ –¥–∞ –∂—Ç—Ä–≤—É—ò–µ–º–æ –ª–∞–∫–æ—õ—É —É–ø–æ—Ç—Ä–µ–±–µ:

```c
int expect_string(int sm, char const* ex, char* ln, size_t max_len)
{
    return ((read(sm, ln, max_len) > 0) && (0 == strcmp(ex, ln))) - 1;
}
```

–°–∞–¥ –∫–æ—Ä–∏—Å–Ω–∏–∫ (–æ–Ω–∞—ò –∫–æ –ø–æ–∑–∏–≤–∞) –º–æ—Ä–∞ –¥–∞ –∑–∞—É–∑–º–µ –Ω–∏—Å–∫—É –∑–∞ —Ä–∞–¥–Ω–∏-–ø–æ–º–æ—õ–Ω–∏
–Ω–∏–∑ (—Ä–µ–¥) –∏ –¥–∞ –ø—Ä–æ—Å–ª–µ–¥–∏ –¥–∏–º–µ–Ω–∑–∏—ò—É "–∑–∞—É–∑–µ—Ç–æ—Å—Ç–∏", —à—Ç–æ —ò–µ –º–∞–ª–æ
–Ω–µ–ø—Ä–∏—ò–∞—Ç–Ω–æ.

–ê–ª–∏, –∏–∞–∫–æ —ò–µ –æ–≤–∞—ò —Ä–µ–¥ –∏–ø–∞–∫ –Ω–µ—à—Ç–æ –¥—É–∂–∏ –∏ –æ–ø—à–∏—Ä–Ω–∏—ò–∏ –æ–¥ —Å–ª–∏—á–Ω–æ–≥ —É –≤–∏—à–µ–º
–ø—Ä–æ–≥—Ä–∞–º—Å–∫–æ–º —ò–µ–∑–∏–∫—É, –æ–Ω –æ–±—Ä–∞—í—É—ò–µ –≥—Ä–µ—à–∫–µ –∏–∑—Ä–∏—á–∏—Ç–æ (–±–µ–∑ –∏–∑—É–µ—Ç–∞–∫–∞, –∫–æ—ò–∏ —Å—É
—Å–∫—É–ø–∏ –Ω–∞ _–º–Ω–æ–≥–æ_ –Ω–∞—á–∏–Ω–∞) –∏ _–Ω–µ_ –∑–∞—É–∑–∏–º–∞ –∏–∫–∞–∫–≤—É –º–µ–º–æ—Ä–∏—ò—É (—Å–∞ —Ö—Ä–ø–µ), —à—Ç–æ
–∑–Ω–∞—á–∏ –¥–∞ —ò–µ –∑–Ω–∞—á–∞—ò–Ω–æ –±—Ä–∂–∏.

## –¶++ —Ç—Ä–∏–∫ —Å–∞ —É–ø—É—õ–µ—ö–µ–º –Ω–∞ –Ω–∏–∑ –∏ —à–∞–±–ª–æ–Ω–æ–º

–£ –¶++ –±–∏ –±–∏–ª–æ –æ—á–µ–∏–≤–∞–Ω–æ –¥–∞ —Å–µ –∫–æ—Ä–∏—Å—Ç–∏ `std::string` –∏ IOStreams, –∞–ª–∏,
—Å–∞—Å–≤–∏–º —ò–µ —É —Ä–µ–¥—É –¥–∞ —Å–µ –æ—Å—Ç–∞–Ω–µ "–Ω–∏—Å–∫–æ", –∞–ª–∏ –∏–ø–∞–∫ –∫–æ—Ä–∏—Å—Ç–µ –Ω–µ–∫–µ –æ–ª–∞–∫—à–∏—Ü–µ,
–ø–æ–ø—É—Ç –æ–≤–µ –∫–æ—ò–∞ –æ–ª–∞–∫—à–∞–≤–∞ —É–ø–æ—Ç—Ä–µ–±—É –∫–æ—Ä–∏—Å–Ω–∏–∫—É –∫–æ—ò–∏ –∏–º–∞ —Å—Ç–∞—Ç–∏—á–∫–∏ –∑–∞—É–∑–µ—Ç—É
–Ω–∏—Å–∫—É:

```c++
template <int N> inline
int expect_string(int sm, char const* ex, char (ln&)[N]) {
    return ((read(sm, ln, N) > 0) && (0 == strcmp(ex, ln))) - 1;
}
```

## –ù–∞—Ä–∞–≤–æ—É—á–µ–Ω–∏—ò–µ

–ê–∫–æ —Å–µ –ø–∞–∂—ô–≤–∏–æ —Ä–∞–∑–º–∏—Å–ª–∏ —à—Ç–∞ —ò–µ –æ–Ω–æ —à—Ç–æ —Ö–æ—õ–µ–º–æ –¥–∞ –ø–æ—Å—Ç–∏–≥–Ω–µ–º–æ —É –Ω–µ–∫–æ–º –¶
–∫–æ–¥—É, —à—Ç–æ —ò–µ –Ω–∞—à–µ–º —Å–ª—É—á–∞—ò—É –±–∏–ª–∞ –æ–±—Ä–∞–¥–∞ –Ω–µ–∫–∏—Ö –Ω–∏—Å–∫–∏, –º–æ–≥—É—õ–µ —ò–µ –Ω–∞–ø–∏—Å–∞—Ç–∏
–∫–æ–¥ –∫–æ—ò–∏ —Ä–∞–¥–∏ _—Å–∞–º–æ –æ–Ω–æ —à—Ç–æ –º–æ—Ä–∞_. –¢–∞–∫–∞–≤ –∫–æ–¥ —ò–µ –æ–±–∏—á–Ω–æ —Å–ª–∏—á–Ω–µ
—Å–ª–æ–∂–µ–Ω–æ—Å—Ç–∏ –∏ –æ–ø—à–∏—Ä–Ω–æ—Å—Ç–∏ –∫–∞–æ –∫–æ–¥ –∫–æ—ò–∏ –ø–æ—Å—Ç–∏–∂–µ –∏—Å—Ç–æ —É –≤–∏—à–µ–º –ø—Ä–æ–≥—Ä–∞–º—Å–∫–æ–º
—ò–µ–∑–∏–∫—É, –∞–ª–∏ —ò–µ, –∞–∫–æ —ò–µ –∏—Å–ø—Ä–∞–≤–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω, –±—Ä–∂–∏, –∫–æ—Ä–∏—Å—Ç–∏ –º–∞—ö–µ —Ä–µ—Å—É—Ä–∞—Å–∞ –∏
–∏–∑—Ä–∏—á–∏—Ç–æ –æ–±—Ä–∞—í—É—ò–µ –≥—Ä–µ—à–∫–µ.
